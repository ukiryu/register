# yaml-language-server: $schema=https://raw.githubusercontent.com/ukiryu/schemas/refs/heads/main/v1/tool.schema.yaml
---
ukiryu_schema: '1.0'
name: ffmpeg
display_name: FFmpeg Media Converter
homepage: https://ffmpeg.org/
version: '8.0'
aliases:
- ffmpeg
- ff
version_detection:
  # ffmpeg outputs version info when run without arguments
  # Use empty array to mean "run with no arguments"
  command: []
  pattern: ffmpeg version (\d+\.\d+)
  modern_threshold: '5.0'
search_paths:
  macos:
  - "/opt/homebrew/bin/ffmpeg"
  - "/usr/local/bin/ffmpeg"
  - "/opt/local/bin/ffmpeg"
  - "/usr/local/opt/ffmpeg/bin/ffmpeg"
  - "/opt/bin/ffmpeg"
  - "/opt/ffmpeg/bin/ffmpeg"
  linux:
  - "/usr/bin/ffmpeg"
  - "/usr/local/bin/ffmpeg"
  - "/snap/bin/ffmpeg"
  - "/var/lib/flatpak/exports/bin/org.ffmpeg.FFmpeg"
  - "/opt/bin/ffmpeg"
  - "/opt/ffmpeg/bin/ffmpeg"
  - "/usr/local/ffmpeg/bin/ffmpeg"
  windows:
  - C:/ffmpeg/bin/ffmpeg.exe
  - C:/Media/ffmpeg/bin/ffmpeg.exe
  - C:/Program Files/ffmpeg/bin/ffmpeg.exe
  - C:/Program Files (x86)/ffmpeg/bin/ffmpeg.exe
  - "%USERPROFILE%/scoop/apps/ffmpeg/current/ffmpeg.exe"
  - "~/scoop/apps/ffmpeg/current/ffmpeg.exe"
  - C:/ProgramData/chocolatey/lib/ffmpeg/tools/ffmpeg.exe
  - "%LOCALAPPDATA%/Programs/ffmpeg/ffmpeg.exe"
  - "~/AppData/Local/Programs/ffmpeg/ffmpeg.exe"
timeout: 3600
profiles:
- name: modern_unix
  display_name: FFmpeg on Unix
  platforms:
  - macos
  - linux
  shells:
  - bash
  - zsh
  - fish
  - sh
  version: ">= 5.0"
  option_style: single_dash_space
  commands:
  - description: Convert media files between formats
    usage: ffmpeg [global_options] [input_options] -i input [output_options] output
    arguments:
    - name: inputs
      type: file
      variadic: true
      min: 1
      position: 1
      description: Input file(s) (use -i before each)
    - name: output
      type: file
      required: true
      position: last
      description: Output file
    options:
    - name: input
      type: file
      cli: "-i"
      description: Input file URL (can be specified multiple times)
      assignment_delimiter: space
    - name: codec
      type: string
      cli: "-c"
      description: Codec name (e.g., 'copy', 'libx264', 'aac')
      assignment_delimiter: space
    - name: video_codec
      type: string
      cli: "-c:v"
      description: Video codec
      assignment_delimiter: space
    - name: audio_codec
      type: string
      cli: "-c:a"
      description: Audio codec
      assignment_delimiter: space
    - name: subtitle_codec
      type: string
      cli: "-c:s"
      description: Subtitle codec
      assignment_delimiter: space
    - name: bitrate
      type: string
      cli: "-b"
      description: Bitrate (e.g., '1M', '500k')
      assignment_delimiter: space
    - name: video_bitrate
      type: string
      cli: "-b:v"
      description: Video bitrate
      assignment_delimiter: space
    - name: audio_bitrate
      type: string
      cli: "-b:a"
      description: Audio bitrate
      assignment_delimiter: space
    - name: frame_rate
      type: string
      cli: "-r"
      description: Frame rate (e.g., '24', '29.97', '30')
      assignment_delimiter: space
    - name: size
      type: string
      cli: "-s"
      description: Frame size (e.g., '1920x1080', '1280x720')
      assignment_delimiter: space
    - name: video_size
      type: string
      cli: "-vsize"
      description: Video frame size
      assignment_delimiter: space
    - name: video_filter
      type: string
      cli: "-vf"
      description: Video filter graph
      assignment_delimiter: space
    - name: filter_complex
      type: string
      cli: "-filter_complex"
      description: Complex filter graph
      assignment_delimiter: space
    - name: audio_filter
      type: string
      cli: "-af"
      description: Audio filter graph
      assignment_delimiter: space
    - name: start_time
      type: string
      cli: "-ss"
      description: Start time (e.g., '00:01:30', '90')
      assignment_delimiter: space
    - name: end_time
      type: string
      cli: "-to"
      description: End time
      assignment_delimiter: space
    - name: duration
      type: string
      cli: "-t"
      description: Duration (e.g., '00:05:00', '300')
      assignment_delimiter: space
    - name: map
      type: string
      cli: "-map"
      description: Map stream from input to output (e.g., '0:v', '0:a')
      assignment_delimiter: space
    - name: format
      type: string
      cli: "-f"
      description: Output format
      assignment_delimiter: space
    - name: input_format
      type: string
      cli: "-f"
      description: Input format (must come before -i)
      assignment_delimiter: space
    - name: quality
      type: integer
      cli: "-q"
      range:
      - 1
      - 31
      description: Quality (1-31, lower is better for some codecs)
      assignment_delimiter: space
    - name: video_quality
      type: integer
      cli: "-q:v"
      range:
      - 1
      - 31
      description: Video quality (CRF for libx264)
      assignment_delimiter: space
    - name: audio_quality
      type: integer
      cli: "-q:a"
      range:
      - 1
      - 10
      description: Audio quality
      assignment_delimiter: space
    - name: preset
      type: string
      cli: "-preset"
      values:
      - ultrafast
      - superfast
      - veryfast
      - faster
      - fast
      - medium
      - slow
      - slower
      - veryslow
      description: Encoder preset (speed vs compression)
      assignment_delimiter: space
    - name: tune
      type: string
      cli: "-tune"
      values:
      - film
      - animation
      - grain
      - stillimage
      - fastdecode
      - zerolatency
      description: Encoder tuning
      assignment_delimiter: space
    - name: aspect
      type: string
      cli: "-aspect"
      description: Aspect ratio (e.g., '16:9', '4:3')
      assignment_delimiter: space
    - name: audio_channels
      type: integer
      cli: "-ac"
      description: Number of audio channels
      assignment_delimiter: space
    - name: audio_sample_rate
      type: integer
      cli: "-ar"
      values:
      - 8000
      - 11025
      - 16000
      - 22050
      - 44100
      - 48000
      - 96000
      description: Audio sampling rate
      assignment_delimiter: space
    - name: pix_fmt
      type: string
      cli: "-pix_fmt"
      values:
      - yuv420p
      - yuv422p
      - yuv444p
      - rgb24
      - rgba
      description: Pixel format
      assignment_delimiter: space
    - name: threads
      type: integer
      cli: "-threads"
      description: Number of threads to use
      assignment_delimiter: space
    - name: bufsize
      type: string
      cli: "-bufsize"
      description: Decoder buffer size
      assignment_delimiter: space
    - name: metadata
      type: string
      cli: "-metadata"
      description: Metadata key=value
      assignment_delimiter: space
    flags:
    - name: overwrite
      cli: "-y"
      description: Overwrite output file without asking
      default: false
      assignment_delimiter: none
    - name: no_overwrite
      cli: "-n"
      description: Do not overwrite output file
      default: false
      assignment_delimiter: none
    - name: quiet
      cli: "-quiet"
      cli_short: "-loglevel quiet"
      description: Suppress output
      default: false
      assignment_delimiter: none
    - name: verbose
      cli: "-v"
      description: Verbose logging
      default: false
      assignment_delimiter: none
    - name: hide_banner
      cli: "-hide_banner"
      description: Hide copyright banner
      default: false
      assignment_delimiter: none
    - name: stream_copy
      cli: "-c"
      cli_short: "-c copy"
      description: Copy streams without re-encoding
      default: false
      assignment_delimiter: none
    - name: no_audio
      cli: "-an"
      description: Disable audio recording
      default: false
      assignment_delimiter: none
    - name: no_video
      cli: "-vn"
      description: Disable video recording
      default: false
      assignment_delimiter: none
    - name: no_subtitle
      cli: "-sn"
      description: Disable subtitle recording
      default: false
      assignment_delimiter: none
    name: convert
- name: modern_windows
  display_name: FFmpeg on Windows
  platforms:
  - windows
  shells:
  - bash
  - powershell
  - cmd
  version: ">= 5.0"
  inherits: modern_unix
smoke_tests:
- name: version
  description: Verify ffmpeg version
  command: []
  expect:
    exit_code: 1
    stdout_pattern: ffmpeg version
