# yaml-language-server: $schema=https://raw.githubusercontent.com/ukiryu/schemas/refs/heads/main/v1/tool.schema.yaml
---
ukiryu_schema: '1.0'
name: ukiryu
display_name: Ukiryu CLI Tool Runner
homepage: https://github.com/riboseinc/ukiryu
version: '0.1'
version_detection:
  command:
  - version
  pattern: Ukiryu version ([\d.]+)
search_paths:
  macos:
  - "/usr/local/bin/ukiryu"
  - "./ukiryu/exe/ukiryu"
  linux:
  - "/usr/bin/ukiryu"
  - "./ukiryu/exe/ukiryu"
  windows:
  - C:/Program Files/ukiryu/bin/ukiryu.exe
  - "./ukiryu/exe/ukiryu.exe"
timeout: 60
profiles:
- name: default
  display_name: Ukiryu CLI
  platforms:
  - macos
  - linux
  - windows
  shells:
  - bash
  - zsh
  - fish
  - sh
  - powershell
  - cmd
  option_style: double_dash_space
  commands:
  - name: help
    description: Show help for a command or general help
    usage: ukiryu help [COMMAND]
    arguments:
    - name: command
      type: string
      required: false
      position: last
      description: Command to show help for (omit for general help)
  - name: list
    description: List all available tools in the register
    usage: ukiryu list [--register PATH]
    aliases:
    - ls
    options:
    - name: register
      type: string
      cli: "--register"
      cli_short: "-r"
      description: Path to tool register
      assignment_delimiter: auto
  - name: info
    description: Show detailed information about a tool
    usage: ukiryu info [TOOL] [--register PATH] [--all]
    aliases:
    - show
    arguments:
    - name: tool
      type: string
      required: false
      position: 1
      description: Tool name (omit for general info)
    options:
    - name: register
      type: string
      cli: "--register"
      cli_short: "-r"
      description: Path to tool register
      assignment_delimiter: auto
    - name: all
      cli: "--all"
      description: Show all implementations for interfaces
      assignment_delimiter: auto
  - name: exec
    description: Execute a tool command inline
    usage: ukiryu exec TOOL [COMMAND] [KEY=VALUE ...]
    aliases:
    - ex
    - run
    - execute
    arguments:
    - name: tool
      type: string
      required: true
      position: 1
      description: Tool name to execute
    - name: command
      type: string
      required: false
      position: 2
      description: Command name (uses default if omitted)
    options:
    - name: register
      type: string
      cli: "--register"
      cli_short: "-r"
      description: Path to tool register
      assignment_delimiter: auto
    - name: format
      type: symbol
      cli: "--format"
      cli_short: "-f"
      values:
      - yaml
      - json
      - table
      - raw
      description: Response format (use 'raw' for pipe composition)
      assignment_delimiter: auto
    - name: output
      type: file
      cli: "--output"
      cli_short: "-o"
      description: Output file for response
      assignment_delimiter: auto
    - name: dry_run
      cli: "--dry-run"
      cli_short: "-d"
      description: Show execution request without executing
      assignment_delimiter: auto
    - name: shell
      type: symbol
      cli: "--shell"
      values:
      - bash
      - zsh
      - fish
      - sh
      - powershell
      - cmd
      description: Shell to use for command execution
      assignment_delimiter: auto
    flags:
    - name: stdin
      cli: "--stdin"
      description: Read input from stdin (pass to command)
      assignment_delimiter: none
  - name: validate
    description: Validate tool profile(s) against schema
    usage: ukiryu validate [TOOL] [--register PATH]
    aliases:
    - check
    - test
    arguments:
    - name: tool
      type: string
      required: false
      position: last
      description: Tool name to validate (validates all if omitted)
    options:
    - name: register
      type: string
      cli: "--register"
      cli_short: "-r"
      description: Path to tool register
      assignment_delimiter: auto
  - name: config
    description: Manage configuration (list, get, set, unset)
    usage: ukiryu config [ACTION] [KEY] [VALUE]
    aliases:
    - cfg
    - settings
    arguments:
    - name: action
      type: symbol
      required: false
      position: 1
      default: list
      values:
      - list
      - get
      - set
      - unset
      description: Configuration action
    - name: key
      type: string
      required: false
      position: 2
      description: Configuration key
    - name: value
      type: string
      required: false
      position: 3
      description: Configuration value (for set action)
    options:
    - name: register
      type: string
      cli: "--register"
      cli_short: "-r"
      description: Path to tool register
      assignment_delimiter: auto
  - name: describe
    description: Show comprehensive documentation for a tool or command
    usage: ukiryu describe TOOL [COMMAND] [--register PATH] [--format FORMAT]
    aliases:
    - docs
    - documentation
    arguments:
    - name: tool
      type: string
      required: true
      position: 1
      description: Tool name
    - name: command
      type: string
      required: false
      position: 2
      description: Command name (optional)
    options:
    - name: register
      type: string
      cli: "--register"
      cli_short: "-r"
      description: Path to tool register
      assignment_delimiter: auto
    - name: format
      type: symbol
      cli: "--format"
      cli_short: "-f"
      values:
      - text
      - yaml
      - json
      description: Output format
      assignment_delimiter: auto
  - name: system
    description: Show system information (shells, etc.)
    usage: ukiryu system [SUBCOMMAND] [--register PATH]
    aliases:
    - sys
    arguments:
    - name: subcommand
      type: string
      required: false
      position: last
      description: System subcommand (e.g., 'shells')
    options:
    - name: register
      type: string
      cli: "--register"
      cli_short: "-r"
      description: Path to tool register
      assignment_delimiter: auto
  - name: version
    description: Show Ukiryu version
    usage: ukiryu version
    aliases:
    - v
    - ver
  - name: which
    description: Show which tool implementation would be selected
    usage: ukiryu which IDENTIFIER [--register PATH] [--platform PLATFORM] [--shell
      SHELL]
    aliases:
    - resolve
    - find
    arguments:
    - name: identifier
      type: string
      required: true
      position: last
      description: Tool or interface identifier
    options:
    - name: register
      type: string
      cli: "--register"
      cli_short: "-r"
      description: Path to tool register
      assignment_delimiter: auto
    - name: platform
      type: symbol
      cli: "--platform"
      values:
      - macos
      - linux
      - windows
      description: Platform to check
      assignment_delimiter: auto
    - name: shell
      type: symbol
      cli: "--shell"
      values:
      - bash
      - zsh
      - fish
      - sh
      - powershell
      - cmd
      description: Shell to check
      assignment_delimiter: auto
  - name: run_file
    description: Execute a Ukiryu Structured Execution Request from a YAML file
    usage: ukiryu run-file REQUEST_FILE [OPTIONS]
    subcommand: run-file
    aliases:
    - run-file
    - rf
    arguments:
    - name: request_file
      type: file
      required: true
      position: 1
      description: YAML file containing execution request
    options:
    - name: register
      type: string
      cli: "--register"
      cli_short: "-r"
      description: Path to tool register
      assignment_delimiter: auto
    - name: format
      type: symbol
      cli: "--format"
      cli_short: "-f"
      values:
      - yaml
      - json
      - table
      - raw
      description: Response format
      assignment_delimiter: auto
    - name: output
      type: file
      cli: "--output"
      cli_short: "-o"
      description: Output file for response
      assignment_delimiter: auto
    - name: dry_run
      cli: "--dry-run"
      cli_short: "-d"
      description: Show execution request without executing
      assignment_delimiter: auto
    - name: shell
      type: symbol
      cli: "--shell"
      values:
      - bash
      - zsh
      - fish
      - sh
      - powershell
      - cmd
      description: Shell to use for command execution
      assignment_delimiter: auto
smoke_tests:
- name: version
  description: Verify ukiryu version
  command:
  - version
  expect:
    exit_code: 0
- name: help
  description: Verify help output
  command:
  - "--help"
  expect:
    exit_code: 0
