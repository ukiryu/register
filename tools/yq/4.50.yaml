# yaml-language-server: $schema=https://raw.githubusercontent.com/ukiryu/schemas/refs/heads/main/v1/tool.schema.yaml
---
ukiryu_schema: '1.0'
name: yq
display_name: yq Data Processor
homepage: https://mikefarah.gitbook.io/yq/
version: '4.50'
aliases:
- yq
version_detection:
  command: "--version"
  # Only match mikefarah/yq which ALWAYS includes "version" in output.
  # The jq wrapper (impostor) outputs "yq 0.0.0" without "version" word.
  pattern: "yq.*version v?([\\d.]+)"
  modern_threshold: '4.0'
search_paths:
  macos:
  - "/opt/homebrew/bin/yq"
  - "/usr/local/bin/yq"
  - "/usr/bin/yq"
  linux:
  - "/usr/bin/yq"
  - "/usr/local/bin/yq"
  - "/snap/bin/yq"
  windows:
  - C:/Program Files/yq/yq.exe
  - C:/Users/*/scoop/apps/yq/current/yq.exe
  - "%USERPROFILE%/scoop/apps/yq/current/yq.exe"
timeout: 60
profiles:
- name: unix
  display_name: yq on Unix
  platforms:
  - macos
  - linux
  shells:
  - bash
  - zsh
  - fish
  - sh
  option_style: double_dash_space
  commands:
  - description: Apply expression to each document in sequence
    usage: yq eval [expression] [files...]
    subcommand: eval
    arguments:
    - name: expression
      type: string
      required: true
      position: 1
      description: yq expression to apply
    - name: inputs
      type: file
      variadic: true
      min: 0
      position: last
      description: 'Input file(s) (default: stdin)'
    options:
    - name: format
      type: string
      cli: "-f"
      values:
      - yaml
      - json
      - xml
      - csv
      - props
      - toml
      description: Output format
      assignment_delimiter: auto
    - name: input_format
      type: string
      cli: "-p"
      values:
      - yaml
      - json
      - xml
      - csv
      - props
      - toml
      description: Input format
      assignment_delimiter: auto
    - name: output
      type: file
      cli: "-o"
      description: 'Output file (default: stdout)'
      assignment_delimiter: auto
    - name: separator
      type: string
      cli: "--separator"
      description: Custom separator for multiple documents
      assignment_delimiter: auto
    - name: doc_separator
      type: string
      cli: "--doc-separator"
      description: Custom document separator
      assignment_delimiter: auto
    - name: front_matter
      type: string
      cli: "--front-matter"
      description: Process front matter (e.g. '---')
      assignment_delimiter: auto
    - name: select
      type: string
      cli: "--select"
      description: Select specific nodes by path
      assignment_delimiter: auto
    flags:
    - name: zero_input
      cli: "-n"
      description: Null input
      default: false
      assignment_delimiter: none
    - name: raw_output
      cli: "-r"
      description: Raw string output
      default: false
      assignment_delimiter: none
    - name: raw_output_mode
      cli: "--raw-output"
      description: Force raw string output
      default: false
      assignment_delimiter: none
    - name: unescaped
      cli: "-I"
      description: Unescaped output
      default: false
      assignment_delimiter: none
    - name: yaml_output
      cli: "-Y"
      description: YAML output
      default: false
      assignment_delimiter: none
    - name: colors_output
      cli: "-C"
      description: Colors output
      default: false
      assignment_delimiter: none
    - name: json_flags
      cli: "-j"
      description: JSON flags output
      default: false
      assignment_delimiter: none
    - name: parse_only
      cli: "--parse-only"
      description: Only parse, don't evaluate
      default: false
      assignment_delimiter: none
    - name: exit_status
      cli: "-e"
      description: Exit status on errors
      default: false
      assignment_delimiter: none
    - name: verbose
      cli: "-v"
      description: Verbose output
      default: false
      assignment_delimiter: none
    - name: quiet
      cli: "-q"
      description: Quiet output
      default: false
      assignment_delimiter: none
    - name: help
      cli: "-h"
      description: Show help
      default: false
      assignment_delimiter: none
    name: eval
  - description: Evaluate expression on all documents at once
    usage: yq eval-all [expression] [files...]
    subcommand: eval-all
    arguments:
    - name: expression
      type: string
      required: true
      position: 1
      description: yq expression to apply
    - name: inputs
      type: file
      variadic: true
      min: 0
      position: last
      description: 'Input file(s) (default: stdin)'
    options:
    - name: format
      type: string
      cli: "-f"
      values:
      - yaml
      - json
      - xml
      - csv
      - props
      - toml
      description: Output format
      assignment_delimiter: auto
    - name: input_format
      type: string
      cli: "-p"
      values:
      - yaml
      - json
      - xml
      - csv
      - props
      - toml
      description: Input format
      assignment_delimiter: auto
    - name: output
      type: file
      cli: "-o"
      description: 'Output file (default: stdout)'
      assignment_delimiter: auto
    name: eval_all
  - description: Evaluate expression and update file in place
    usage: yq eval -i [expression] [files...]
    subcommand: eval
    arguments:
    - name: expression
      type: string
      required: true
      position: 1
      description: yq expression to apply
    - name: inputs
      type: file
      variadic: true
      min: 1
      position: last
      description: File(s) to update in place
    options:
    - name: format
      type: string
      cli: "-f"
      values:
      - yaml
      - json
      - xml
      - csv
      - props
      - toml
      description: Output format
      assignment_delimiter: auto
    flags:
    - name: in_place
      cli: "-i"
      description: Edit files in place
      default: true
      assignment_delimiter: none
    name: eval_in_place
- name: windows
  display_name: yq on Windows
  platforms:
  - windows
  shells:
  - bash
  - powershell
  - cmd
  inherits: unix
smoke_tests:
- name: version
  description: Verify yq version
  command:
  - "--version"
  expect:
    exit_code: 0
- name: help
  description: Verify help output
  command:
  - "--help"
  expect:
    exit_code: 0
