---
# Inkscape tool profile for Ukiryu
# Legacy Inkscape (0.x) on Unix platforms

name: inkscape
display_name: Inkscape Vector Graphics Editor
homepage: https://inkscape.org/
version: "0.92"

aliases:
  - inkscapecom
  - ink

version_detection:
  command: "--version"
  pattern: "Inkscape (\\d+\\.\\d+)"

search_paths:
  macos:
    - "/Applications/Inkscape.app/Contents/MacOS/inkscape"

timeout: 90

profiles:
  # Legacy Inkscape (0.92) on Unix (macOS, Linux) with Bash/Zsh/Fish/Sh
  - name: legacy_unix
    display_name: Legacy Inkscape on Unix
    platforms:
      - macos
      - linux
    shells:
      - bash
      - zsh
      - fish
      - sh
    version: "< 1.0"
    option_style: double_dash_equals

    commands:
      # Export command - convert between formats
      export:
        description: "Export document to different format (legacy)"
        usage: "inkscape [OPTIONS] input1.svg [input2.svg ...]"

        arguments:
          - name: inputs
            type: file
            variadic: true
            position: last
            min: 1
            description: "Input file(s)"

        options:
          # Output file
          - name: output
            type: file
            cli: "--export-filename="
            format: double_dash_equals
            description: "Output filename"
            required: true

          # Export format (legacy uses --export-type instead of --export-filename for some formats)
          - name: format
            type: symbol
            cli: "--export-type="
            format: double_dash_equals
            values:
              - svg
              - png
              - ps
              - eps
              - pdf
              - emf
              - wmf
              - xaml
            description: "Output format"

          # DPI for bitmap export
          - name: dpi
            type: integer
            cli: "-d"
            format: single_dash_space
            separator: " "
            range: [1, 10000]
            description: "Resolution for bitmaps (default: 96)"

          # Width
          - name: width
            type: integer
            cli: "--export-width="
            description: "Bitmap width in pixels"

          # Height
          - name: height
            type: integer
            cli: "--export-height="
            description: "Bitmap height in pixels"

        flags:
          # Plain SVG export
          - name: plain
            cli: "--export-plain-svg"
            cli_short: "-l"
            description: "Remove Inkscape-specific attributes"
            default: false

          # Text to path
          - name: text_to_path
            cli: "--export-text-to-path"
            cli_short: "-T"
            description: "Convert text to paths"
            default: false

        env_vars:
          # Disable display on Unix for headless operation
          - name: DISPLAY
            value: ""
            platforms:
              - macos
              - linux
            description: "Disable display for headless operation"

      # Query command - get document dimensions
      query:
        description: "Query document dimensions (legacy)"
        usage: "inkscape --query-width/--query-height input.svg"

        arguments:
          - name: input
            type: file
            required: true
            position: 1
            description: "Input file"

        flags:
          - name: width
            cli: "--query-width"
            cli_short: "-W"
            description: "Query width"
            default: false

          - name: height
            cli: "--query-height"
            cli_short: "-H"
            description: "Query height"
            default: false

          - name: x
            cli: "--query-x"
            cli_short: "-X"
            description: "Query X coordinate"
            default: false

          - name: y
            cli: "--query-y"
            cli_short: "-Y"
            description: "Query Y coordinate"
            default: false
